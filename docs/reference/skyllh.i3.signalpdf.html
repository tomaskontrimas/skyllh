

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>skyllh.i3.signalpdf module &mdash; SkyLLH  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skyllh.physics package" href="skyllh.physics.html" />
    <link rel="prev" title="skyllh.i3.signal_generation module" href="skyllh.i3.signal_generation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SkyLLH
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hypothesis/index.html">Hypothesis Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="skyllh.html">skyllh package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skyllh.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="skyllh.cluster.html">skyllh.cluster package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.core.html">skyllh.core package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="skyllh.i3.html">skyllh.i3 package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="skyllh.i3.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="skyllh.i3.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.physics.html">skyllh.physics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.plotting.html">skyllh.plotting package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.utils.html">skyllh.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notes.html">Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_docs/logging.html">Logging</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SkyLLH</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="skyllh.html">skyllh package</a> &raquo;</li>
        
          <li><a href="skyllh.i3.html">skyllh.i3 package</a> &raquo;</li>
        
      <li>skyllh.i3.signalpdf module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/reference/skyllh.i3.signalpdf.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-skyllh.i3.signalpdf">
<span id="skyllh-i3-signalpdf-module"></span><h1>skyllh.i3.signalpdf module<a class="headerlink" href="#module-skyllh.i3.signalpdf" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="skyllh.i3.signalpdf.SignalI3EnergyPDFSet">
<em class="property">class </em><code class="sig-prename descclassname">skyllh.i3.signalpdf.</code><code class="sig-name descname">SignalI3EnergyPDFSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_mc</span></em>, <em class="sig-param"><span class="n">logE_binning</span></em>, <em class="sig-param"><span class="n">sinDec_binning</span></em>, <em class="sig-param"><span class="n">fluxmodel</span></em>, <em class="sig-param"><span class="n">fitparam_grid_set</span></em>, <em class="sig-param"><span class="n">smoothing_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncpu</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ppbar</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signalpdf.SignalI3EnergyPDFSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.pdf.html#skyllh.core.pdf.PDFSet" title="skyllh.core.pdf.PDFSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.pdf.PDFSet</span></code></a>, <a class="reference internal" href="skyllh.core.pdf.html#skyllh.core.pdf.IsSignalPDF" title="skyllh.core.pdf.IsSignalPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.pdf.IsSignalPDF</span></code></a>, <a class="reference internal" href="skyllh.core.multiproc.html#skyllh.core.multiproc.IsParallelizable" title="skyllh.core.multiproc.IsParallelizable"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.multiproc.IsParallelizable</span></code></a></p>
<p>This is the signal energy PDF for IceCube. It creates a set of
I3EnergyPDF objects for a discrete set of energy signal parameters. Energy
signal parameters are the parameters that influence the source flux model.</p>
<p>Creates a new IceCube energy signal PDF for a given flux model and
a set of fit parameter grids for the flux model.
It creates a set of I3EnergyPDF objects for each signal parameter value
permutation and stores it inside the <code class="docutils literal notranslate"><span class="pre">_params_hash_I3EnergyPDF_dict</span></code>
dictionary, where the hash of the fit parameters dictionary is the key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_mc</strong> (<em>instance of DataFieldRecordArray</em>) – <p>The array holding the monte-carlo data. The following data fields
must exist:</p>
<ul>
<li><dl class="simple">
<dt>’true_energy’<span class="classifier">float</span></dt><dd><p>The true energy value of the data event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the reconstructed energy value of the data
event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’dec’<span class="classifier">float</span></dt><dd><p>The declination of the data event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’mcweight’<span class="classifier">float</span></dt><dd><p>The monte-carlo weight value of the data events in unit
GeV cm^2 sr.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>logE_binning</strong> (<a class="reference internal" href="skyllh.core.binning.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the binning in log10(E).</p></li>
<li><p><strong>sinDec_binning</strong> (<a class="reference internal" href="skyllh.core.binning.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the sin(declination).</p></li>
<li><p><strong>fluxmodel</strong> (<a class="reference internal" href="skyllh.physics.flux.html#skyllh.physics.flux.FluxModel" title="skyllh.physics.flux.FluxModel"><em>FluxModel</em></a>) – The flux model to use to create the signal energy PDF.</p></li>
<li><p><strong>fitparam_grid_set</strong> (<em>ParameterGridSet | ParameterGrid</em>) – The set of parameter grids. A ParameterGrid object for each
energy fit parameter, for which an I3EnergyPDF object needs to be
created.</p></li>
<li><p><strong>smoothing_filter</strong> (<em>SmoothingFilter instance | None</em>) – The smoothing filter to use for smoothing the energy histogram.
If None, no smoothing will be applied.</p></li>
<li><p><strong>ncpu</strong> (<em>int | None</em><em> (</em><em>default</em><em>)</em>) – The number of CPUs to use to create the different I3EnergyPDF
objects for the different fit parameter grid values.</p></li>
<li><p><strong>ppbar</strong> (<em>ProgressBar instance | None</em>) – The instance of ProgressBar of the optional parent progress bar.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="skyllh.i3.signalpdf.SignalI3EnergyPDFSet.assert_is_valid_for_exp_data">
<code class="sig-name descname">assert_is_valid_for_exp_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_exp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signalpdf.SignalI3EnergyPDFSet.assert_is_valid_for_exp_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if this signal energy PDF is valid for all the given
experimental data.
It checks if all the data is within the logE and sin(dec) binning range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_exp</strong> (<em>numpy record ndarray</em>) – <p>The array holding the experimental data. The following data fields
must exist:</p>
<ul class="simple">
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the energy value of the data event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’dec’<span class="classifier">float</span></dt><dd><p>The declination of the data event.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If some of the data is outside the logE or sin(dec) binning range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.signalpdf.SignalI3EnergyPDFSet.get_prob">
<code class="sig-name descname">get_prob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tdm</span></em>, <em class="sig-param"><span class="n">gridfitparams</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signalpdf.SignalI3EnergyPDFSet.get_prob" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the signal energy probability (in logE) of each event for
a given set of signal fit parameters on a grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>instance of TrialDataManager</em>) – <p>The TrialDataManager instance holding the data events for which the
probability should be calculated for. The following data fields must
exist:</p>
<ul>
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the energy value of the event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’sin_dec’<span class="classifier">float</span></dt><dd><p>The sin(declination) value of the event.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>gridfitparams</strong> (<em>dict</em>) – The dictionary holding the signal parameter values for which the
signal energy probability should be calculated. Note, that the
parameter values must match a set of parameter grid values for which
an I3EnergyPDF object has been created at construction time of this
SignalI3EnergyPDF object. There is no interpolation method defined
at this point to allow for arbitrary parameter values!</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>prob</strong> (<em>1d ndarray</em>) – The array with the signal energy probability for each event.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – If no energy PDF can be found for the given signal parameter values.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="skyllh.physics.html" class="btn btn-neutral float-right" title="skyllh.physics package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="skyllh.i3.signal_generation.html" class="btn btn-neutral float-left" title="skyllh.i3.signal_generation module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, The IceCube Collaboration, T. Kontrimas, M. Wolf.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>