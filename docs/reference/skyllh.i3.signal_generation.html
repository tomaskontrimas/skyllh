

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>skyllh.i3.signal_generation module &mdash; SkyLLH  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skyllh.i3.signalpdf module" href="skyllh.i3.signalpdf.html" />
    <link rel="prev" title="skyllh.i3.scrambling module" href="skyllh.i3.scrambling.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SkyLLH
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hypothesis/index.html">Hypothesis Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="skyllh.html">skyllh package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skyllh.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="skyllh.cluster.html">skyllh.cluster package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.core.html">skyllh.core package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="skyllh.i3.html">skyllh.i3 package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="skyllh.i3.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="skyllh.i3.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.physics.html">skyllh.physics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.plotting.html">skyllh.plotting package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.utils.html">skyllh.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notes.html">Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_docs/logging.html">Logging</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SkyLLH</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="skyllh.html">skyllh package</a> &raquo;</li>
        
          <li><a href="skyllh.i3.html">skyllh.i3 package</a> &raquo;</li>
        
      <li>skyllh.i3.signal_generation module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/reference/skyllh.i3.signal_generation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-skyllh.i3.signal_generation">
<span id="skyllh-i3-signal-generation-module"></span><h1>skyllh.i3.signal_generation module<a class="headerlink" href="#module-skyllh.i3.signal_generation" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="skyllh.i3.signal_generation.source_sin_dec_shift_linear">
<code class="sig-prename descclassname">skyllh.i3.signal_generation.</code><code class="sig-name descname">source_sin_dec_shift_linear</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">L</span></em>, <em class="sig-param"><span class="n">U</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signal_generation.source_sin_dec_shift_linear" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the shift of the sine of the source declination, in order to
allow the construction of the source sine declination band with
sin(dec_src) +/- w. This shift function, S(x), is implemented as a line
with the following points:</p>
<blockquote>
<div><p>S(L) = w
S((L+U)/2) = 0
S(U) = -w</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>1D numpy ndarray</em>) – The sine of the source declination for each source.</p></li>
<li><p><strong>w</strong> (<em>float</em>) – The half size of the sin(dec)-window.</p></li>
<li><p><strong>L</strong> (<em>float</em>) – The lower value of the allowed sin(dec) range.</p></li>
<li><p><strong>U</strong> (<em>float</em>) – The upper value of the allowed sin(dec) range.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>S</strong> (<em>1D numpy ndarray</em>) – The sin(dec) shift of the sin(dec) values of the given sources, such
that <code class="docutils literal notranslate"><span class="pre">sin(dec_src)</span> <span class="pre">+</span> <span class="pre">S</span></code> is the new sin(dec) of the source, and
<code class="docutils literal notranslate"><span class="pre">sin(dec_src)</span> <span class="pre">+</span> <span class="pre">S</span> <span class="pre">+/-</span> <span class="pre">w</span></code> is always within the sin(dec) range [L, U].</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="skyllh.i3.signal_generation.source_sin_dec_shift_cubic">
<code class="sig-prename descclassname">skyllh.i3.signal_generation.</code><code class="sig-name descname">source_sin_dec_shift_cubic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">L</span></em>, <em class="sig-param"><span class="n">U</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signal_generation.source_sin_dec_shift_cubic" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the shift of the sine of the source declination, in order to
allow the construction of the source sine declination band with
sin(dec_src) +/- w. This shift function, S(x), is implemented as a cubic
function with the following points:</p>
<blockquote>
<div><p>S(L) = w
S((L+U)/2) = 0
S(U) = -w</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>1D numpy ndarray</em>) – The sine of the source declination for each source.</p></li>
<li><p><strong>w</strong> (<em>float</em>) – The half size of the sin(dec)-window.</p></li>
<li><p><strong>L</strong> (<em>float</em>) – The lower value of the allowed sin(dec) range.</p></li>
<li><p><strong>U</strong> (<em>float</em>) – The upper value of the allowed sin(dec) range.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>S</strong> (<em>1D numpy ndarray</em>) – The sin(dec) shift of the sin(dec) values of the given sources, such
that <code class="docutils literal notranslate"><span class="pre">sin(dec_src)</span> <span class="pre">+</span> <span class="pre">S</span></code> is the new sin(dec) of the source, and
<code class="docutils literal notranslate"><span class="pre">sin(dec_src)</span> <span class="pre">+</span> <span class="pre">S</span> <span class="pre">+/-</span> <span class="pre">w</span></code> is always within the sin(dec) range [L, U].</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod">
<em class="property">class </em><code class="sig-prename descclassname">skyllh.i3.signal_generation.</code><code class="sig-name descname">PointLikeSourceI3SignalGenerationMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src_sin_dec_half_bandwidth</span><span class="o">=</span><span class="default_value">0.01745240643728351</span></em>, <em class="sig-param"><span class="n">src_sin_dec_shift_func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">energy_range</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.signal_generation.html#skyllh.core.signal_generation.SignalGenerationMethod" title="skyllh.core.signal_generation.SignalGenerationMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.signal_generation.SignalGenerationMethod</span></code></a></p>
<p>This class provides a signal generation method for a point-like source
seen in the IceCube detector.</p>
<p>Constructs a new signal generation method instance for a point-like
source detected with IceCube.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_sin_dec_half_bandwidth</strong> (<em>float</em>) – The half-width of the sin(dec) band to take MC events from around a
source. The default is sin(1deg), i.e. a 1deg half-bandwidth.</p></li>
<li><p><strong>src_sin_dec_shift_func</strong> (<em>callable | None</em>) – The function that provides the source sin(dec) shift needed for
constructing the source declination bands from where to draw
monte-carlo events from. If set to None, the default function
<code class="docutils literal notranslate"><span class="pre">source_sin_dec_shift_linear</span></code> will be used.</p></li>
<li><p><strong>energy_range</strong> (<em>2-element tuple of float | None</em>) – The energy range from which to take MC events into account for
signal event generation.
If set to None, the entire energy range [0, +inf] is used.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.src_sin_dec_half_bandwidth">
<em class="property">property </em><code class="sig-name descname">src_sin_dec_half_bandwidth</code><a class="headerlink" href="#skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.src_sin_dec_half_bandwidth" title="Permalink to this definition">¶</a></dt>
<dd><p>The half-width of the sin(dec) band to take MC events from around a
source.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.src_sin_dec_shift_func">
<em class="property">property </em><code class="sig-name descname">src_sin_dec_shift_func</code><a class="headerlink" href="#skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.src_sin_dec_shift_func" title="Permalink to this definition">¶</a></dt>
<dd><p>The function that provides the source sin(dec) shift needed for
constructing the source declination bands from where to draw
monte-carlo events from.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.calc_source_signal_mc_event_flux">
<code class="sig-name descname">calc_source_signal_mc_event_flux</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_mc</span></em>, <em class="sig-param"><span class="n">shg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.calc_source_signal_mc_event_flux" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the signal flux of each given MC event for each source
hypothesis of the given source hypothesis group. The unit of the signal
flux must be 1/(GeV cm^2 s sr).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_mc</strong> (<em>numpy record ndarray</em>) – The numpy record array holding the MC events of a dataset.</p></li>
<li><p><strong>shg</strong> (<em>SourceHypoGroup instance</em>) – The source hypothesis group, which defines the list of sources, and
their flux model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>indices_list</strong> (<em>list of 1D ndarrays</em>) – The list of event indices arrays specifying which MC events have
been selected as signal candidate events for each source of the
given source hypothesis group. Hence, the length of that list is the
number of sources of the source hypothesis group. The length of the
different 1D ndarrays is variable and depends on the source.</p></li>
<li><p><strong>flux_list</strong> (<em>list of 1D ndarrays</em>) – The list of 1D ndarrays holding the flux value of the selected
signal candidate events. One array for each source of the given
source hypothesis group. Hence, the length of that list is the
number of sources of the source hypothesis group. The length of the
different 1D ndarrays is variable and depends on the source.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.signal_event_post_sampling_processing">
<code class="sig-name descname">signal_event_post_sampling_processing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shg</span></em>, <em class="sig-param"><span class="n">shg_sig_events_meta</span></em>, <em class="sig-param"><span class="n">shg_sig_events</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.signal_generation.PointLikeSourceI3SignalGenerationMethod.signal_event_post_sampling_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates the generated signal events to their source location for a
given source hypothesis group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shg</strong> (<em>SourceHypoGroup instance</em>) – The source hypothesis group instance holding the sources and their
locations.</p></li>
<li><p><strong>shg_sig_events_meta</strong> (<em>numpy record ndarray</em>) – <p>The numpy record ndarray holding meta information about the
generated signal events for the given source hypothesis group.
The length of this array must be the same as shg_sig_events.
It needs to contain the following data fields:</p>
<ul>
<li><dl class="simple">
<dt>’shg_src_idx’: int</dt><dd><p>The source index within the source hypothesis group.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>shg_sig_events</strong> (<em>numpy record ndarray</em>) – The numpy record ndarray holding the generated signal events for
the given source hypothesis group and in the format of the original
MC events.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>shg_sig_events</strong> (<em>numpy record ndarray</em>) – The numpy record ndarray with the processed MC signal events.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="skyllh.i3.signalpdf.html" class="btn btn-neutral float-right" title="skyllh.i3.signalpdf module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="skyllh.i3.scrambling.html" class="btn btn-neutral float-left" title="skyllh.i3.scrambling module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, The IceCube Collaboration, T. Kontrimas, M. Wolf.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>