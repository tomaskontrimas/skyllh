

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>skyllh.core.minimizers.iminuit module &mdash; SkyLLH  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skyllh.core.utils package" href="skyllh.core.utils.html" />
    <link rel="prev" title="skyllh.core.minimizers package" href="skyllh.core.minimizers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SkyLLH
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hypothesis/index.html">Hypothesis Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="skyllh.html">skyllh package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skyllh.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="skyllh.cluster.html">skyllh.cluster package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="skyllh.core.html">skyllh.core package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="skyllh.core.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="skyllh.core.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.i3.html">skyllh.i3 package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.physics.html">skyllh.physics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.plotting.html">skyllh.plotting package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.utils.html">skyllh.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notes.html">Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_docs/logging.html">Logging</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SkyLLH</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="skyllh.html">skyllh package</a> &raquo;</li>
        
          <li><a href="skyllh.core.html">skyllh.core package</a> &raquo;</li>
        
          <li><a href="skyllh.core.minimizers.html">skyllh.core.minimizers package</a> &raquo;</li>
        
      <li>skyllh.core.minimizers.iminuit module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/reference/skyllh.core.minimizers.iminuit.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-skyllh.core.minimizers.iminuit">
<span id="skyllh-core-minimizers-iminuit-module"></span><h1>skyllh.core.minimizers.iminuit module<a class="headerlink" href="#module-skyllh.core.minimizers.iminuit" title="Permalink to this headline">¶</a></h1>
<p>The minimizers/iminuit module provides a SkyLLH interface to the iminuit minimizer.</p>
<dl class="py class">
<dt id="skyllh.core.minimizers.iminuit.FuncWithGradsFunctor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skyllh.core.minimizers.iminuit.</span></code><code class="sig-name descname"><span class="pre">FuncWithGradsFunctor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.FuncWithGradsFunctor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Helper class to evaluate the LLH function that returns the function value
and its gradients in two seperate calls, one for the LLH function value and
one for its gradient values.</p>
<p>Initializes a new functor instance for the given function <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>callable</em>) – <p>The function with call signature</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">__call__(x,</span> <span class="pre">*args)</span></code></p>
</div></blockquote>
<p>returning the a two-element tuple (f, grads).</p>
</p></li>
<li><p><strong>func_args</strong> (<em>tuple | None</em>) – The optional positional arguments for the function <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="skyllh.core.minimizers.iminuit.FuncWithGradsFunctor.get_f">
<code class="sig-name descname"><span class="pre">get_f</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.FuncWithGradsFunctor.get_f" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="skyllh.core.minimizers.iminuit.FuncWithGradsFunctor.get_grads">
<code class="sig-name descname"><span class="pre">get_grads</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.FuncWithGradsFunctor.get_grads" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skyllh.core.minimizers.iminuit.</span></code><code class="sig-name descname"><span class="pre">IMinuitMinimizerImpl</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.minimizer.html#skyllh.core.minimizer.MinimizerImpl" title="skyllh.core.minimizer.MinimizerImpl"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.minimizer.MinimizerImpl</span></code></a></p>
<p>The SkyLLH minimizer implementation that utilizes the iminuit minimizer.</p>
<p>Creates a new IMinuit minimizer instance to minimize a given
function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ftol</strong> (<em>float</em>) – The function value tolerance as absolute value.</p>
</dd>
</dl>
<dl class="py method">
<dt id="skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.minimize">
<code class="sig-name descname"><span class="pre">minimize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimizes the given function <code class="docutils literal notranslate"><span class="pre">func</span></code> with the given initial function
argument values <code class="docutils literal notranslate"><span class="pre">initials</span></code> and within the given parameter bounds
<code class="docutils literal notranslate"><span class="pre">bounds</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initials</strong> (<em>1D numpy ndarray</em>) – The ndarray holding the initial values of all the fit parameters.</p></li>
<li><p><strong>bounds</strong> (<em>2D</em><em> (</em><em>N_fitparams</em><em>,</em><em>2</em><em>)</em><em>-shaped numpy ndarray</em>) – The ndarray holding the boundary values (vmin, vmax) of the fit
parameters.</p></li>
<li><p><strong>func</strong> (<em>callable</em>) – <p>The function that should get minimized.
The call signature must be</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">__call__(x,</span> <span class="pre">*args)</span></code></p>
</div></blockquote>
<p>The return value of <code class="docutils literal notranslate"><span class="pre">func</span></code> must be (f, grads), the function value
at the function arguments <code class="docutils literal notranslate"><span class="pre">x</span></code> and the ndarray with the values of
the function gradient for each fit parameter, if the
<code class="docutils literal notranslate"><span class="pre">func_provides_grads</span></code> keyword argument option is set to True.
If set to False, <code class="docutils literal notranslate"><span class="pre">func</span></code> must return only the function value.</p>
</p></li>
<li><p><strong>func_args</strong> (<em>sequence | None</em>) – Optional sequence of arguments for <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p></li>
<li><p><strong>Keyword Arguments</strong> (<em>Additional</em>) – </p></li>
<li><p><strong>----------------------------</strong> – </p></li>
<li><p><strong>keyword arguments include options for this minimizer</strong> (<em>Additional</em>) – </p></li>
<li><p><strong>Possible options are</strong> (<em>implementation.</em>) – <dl class="simple">
<dt>func_provides_grads<span class="classifier">bool</span></dt><dd><p>Flag if the function <code class="docutils literal notranslate"><span class="pre">func</span></code> also returns its gradients.
Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</p></li>
<li><p><strong>additional keyword arguments are passed on to the underlaying</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
</dl>
<p>:param <code class="xref py py-func docutils literal notranslate"><span class="pre">iminuit.minimize()</span></code> minimization function.:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>xmin</strong> (<em>1D ndarray</em>) – The array containing the function arguments at the function’s
minimum.</p></li>
<li><p><strong>fmin</strong> (<em>float</em>) – The function value at its minimum.</p></li>
<li><p><strong>res</strong> (<em>iminuit.OptimizeResult</em>) – The iminuit OptimizeResult dictionary with additional information.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.get_niter">
<code class="sig-name descname"><span class="pre">get_niter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.get_niter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of iterations needed to find the minimum.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>status</strong> (<em>dict</em>) – The dictionary with the status information about the minimization
process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>niter</strong> (<em>int</em>) – The number of iterations needed to find the minimum.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.has_converged">
<code class="sig-name descname"><span class="pre">has_converged</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.has_converged" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyzes the status information dictionary if the minimization
process has converged. By definition the minimization process has
converged if <code class="docutils literal notranslate"><span class="pre">status['is_valid']</span></code> equals True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>status</strong> (<em>dict</em>) – The dictionary with the status information about the minimization
process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>converged</strong> (<em>bool</em>) – The flag if the minimization has converged (True), or not (False).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.is_repeatable">
<code class="sig-name descname"><span class="pre">is_repeatable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.core.minimizers.iminuit.IMinuitMinimizerImpl.is_repeatable" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the minimization process can be repeated to get a better
result.</p>
<p>TODO: Implement a proper check. For now just return True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>status</strong> (<em>dict</em>) – The dictionary with the status information about the last
minimization process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>repeatable</strong> (<em>bool</em>) – The flag if the minimization process can be repeated to obtain a
better minimum.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="skyllh.core.utils.html" class="btn btn-neutral float-right" title="skyllh.core.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="skyllh.core.minimizers.html" class="btn btn-neutral float-left" title="skyllh.core.minimizers package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, The IceCube Collaboration, T. Kontrimas, M. Wolf.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>