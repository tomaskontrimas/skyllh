

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>skyllh.i3.pdf module &mdash; SkyLLH  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skyllh.i3.pdfratio module" href="skyllh.i3.pdfratio.html" />
    <link rel="prev" title="skyllh.i3.livetime module" href="skyllh.i3.livetime.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SkyLLH
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hypothesis/index.html">Hypothesis Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="skyllh.html">skyllh package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skyllh.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="skyllh.cluster.html">skyllh.cluster package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.core.html">skyllh.core package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="skyllh.i3.html">skyllh.i3 package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="skyllh.i3.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="skyllh.i3.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.physics.html">skyllh.physics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.plotting.html">skyllh.plotting package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.utils.html">skyllh.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notes.html">Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_docs/logging.html">Logging</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SkyLLH</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="skyllh.html">skyllh package</a> &raquo;</li>
        
          <li><a href="skyllh.i3.html">skyllh.i3 package</a> &raquo;</li>
        
      <li>skyllh.i3.pdf module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/reference/skyllh.i3.pdf.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-skyllh.i3.pdf">
<span id="skyllh-i3-pdf-module"></span><h1>skyllh.i3.pdf module<a class="headerlink" href="#module-skyllh.i3.pdf" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="skyllh.i3.pdf.I3EnergyPDF">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">skyllh.i3.pdf.</span></code><code class="sig-name descname"><span class="pre">I3EnergyPDF</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_logE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_sinDec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_mcweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_physicsweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logE_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sinDec_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_filter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.pdf.html#skyllh.core.pdf.EnergyPDF" title="skyllh.core.pdf.EnergyPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.pdf.EnergyPDF</span></code></a>, <a class="reference internal" href="skyllh.core.binning.html#skyllh.core.binning.UsesBinning" title="skyllh.core.binning.UsesBinning"><code class="xref py py-class docutils literal notranslate"><span class="pre">skyllh.core.binning.UsesBinning</span></code></a></p>
<p>This is the base class for all IceCube specific energy PDF models.
IceCube energy PDFs depend soley on the energy and the
zenith angle, and hence, on the declination of the event.</p>
<p>The IceCube energy PDF is modeled as a 1d histogram in energy,
but for different sin(declination) bins, hence, stored as a 2d histogram.</p>
<p>Creates a new IceCube energy PDF object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_logE</strong> (<em>1d ndarray</em>) – The array holding the log10(E) values of the events.</p></li>
<li><p><strong>data_sinDec</strong> (<em>1d ndarray</em>) – The array holding the sin(dec) values of the events.</p></li>
<li><p><strong>data_mcweight</strong> (<em>1d ndarray</em>) – The array holding the monte-carlo weights of the events.
The final data weight will be the product of data_mcweight and
data_physicsweight.</p></li>
<li><p><strong>data_physicsweight</strong> (<em>1d ndarray</em>) – The array holding the physics weights of the events.
The final data weight will be the product of data_mcweight and
data_physicsweight.</p></li>
<li><p><strong>logE_binning</strong> (<a class="reference internal" href="skyllh.core.binning.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the log(E) axis.</p></li>
<li><p><strong>sinDec_binning</strong> (<a class="reference internal" href="skyllh.core.binning.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the sin(declination) axis.</p></li>
<li><p><strong>smoothing_filter</strong> (<em>SmoothingFilter instance | None</em>) – The smoothing filter to use for smoothing the energy histogram.
If None, no smoothing will be applied.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.hist_smoothing_method">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">hist_smoothing_method</span></code><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.hist_smoothing_method" title="Permalink to this definition">¶</a></dt>
<dd><p>The HistSmoothingMethod instance defining the smoothing filter of the
energy PDF histogram.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.hist">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">hist</span></code><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.hist" title="Permalink to this definition">¶</a></dt>
<dd><p>(read-only) The 2D logE-sinDec histogram array.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.hist_mask_mc_covered">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">hist_mask_mc_covered</span></code><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.hist_mask_mc_covered" title="Permalink to this definition">¶</a></dt>
<dd><p>(read-only) The boolean ndarray holding the mask of the 2D histogram
bins for which there is monte-carlo coverage.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.hist_mask_mc_covered_zero_physics">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">hist_mask_mc_covered_zero_physics</span></code><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.hist_mask_mc_covered_zero_physics" title="Permalink to this definition">¶</a></dt>
<dd><p>(read-only) The boolean ndarray holding the mask of the 2D histogram
bins for which there is monte-carlo coverage but zero physics
contribution.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.hist_mask_mc_covered_with_physics">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">hist_mask_mc_covered_with_physics</span></code><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.hist_mask_mc_covered_with_physics" title="Permalink to this definition">¶</a></dt>
<dd><p>(read-only) The boolean ndarray holding the mask of the 2D histogram
bins for which there is monte-carlo coverage and has physics
contribution.</p>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.assert_is_valid_for_exp_data">
<code class="sig-name descname"><span class="pre">assert_is_valid_for_exp_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_exp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.assert_is_valid_for_exp_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if this energy PDF is valid for all the given experimental
data.
It checks if all the data is within the logE and sin(dec) binning range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_exp</strong> (<em>numpy record ndarray</em>) – <p>The array holding the experimental data. The following data fields
must exist:</p>
<ul class="simple">
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the energy value of the data event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’dec’<span class="classifier">float</span></dt><dd><p>The declination of the data event.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If some of the data is outside the logE or sin(dec) binning range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="skyllh.i3.pdf.I3EnergyPDF.get_prob">
<code class="sig-name descname"><span class="pre">get_prob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.i3.pdf.I3EnergyPDF.get_prob" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the energy probability (in logE) of each event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>instance of TrialDataManager</em>) – <p>The TrialDataManager instance holding the data events for which the
probability should be calculated for. The following data fields must
exist:</p>
<ul>
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the energy value of the event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’sin_dec’<span class="classifier">float</span></dt><dd><p>The sin(declination) value of the event.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>fitparams</strong> (<em>None</em>) – Unused interface parameter.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance | None</em>) – The optional TimeLord instance that should be used to measure
timing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>prob</strong> (<em>1D (N_events,) shaped ndarray</em>) – The array with the energy probability for each event.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="skyllh.i3.pdfratio.html" class="btn btn-neutral float-right" title="skyllh.i3.pdfratio module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="skyllh.i3.livetime.html" class="btn btn-neutral float-left" title="skyllh.i3.livetime module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, The IceCube Collaboration, T. Kontrimas, M. Wolf.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>